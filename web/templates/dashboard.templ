package templates

import "nutmix_remote_signer/database"

templ Dashboard(accounts []database.Account) {
	@Layout("Dashboard") {
		<div class="container mx-auto py-8 px-6">
			<div class="flex items-center justify-between mb-6">
				<h1 class="text-2xl font-bold">Accounts</h1>
				<button hx-post="/createkey" hx-target="#cards-list" hx-swap="afterbegin" class="rounded bg-indigo-600 text-white px-4 py-2">Create key</button>
			</div>
			<div id="cards-list" class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
				for _, acct := range accounts {
					@KeyCard(acct)
				}
			</div>
		</div>
	}
}

templ SignerDashboard(account database.Account) {
	@Layout("Signer Dashboard") {
		<div class="container mx-auto py-8 px-6">
			<div class="flex items-center justify-between mb-6">
				<h1 class="text-2xl font-bold">{ account.Name }</h1>
			</div>
			<div class="grid gap-4 grid-cols-1 md:grid-cols-2">
				<div>
					@KeyCard(account)
				</div>
				<div class="rounded-xl border bg-white p-4 shadow-sm">
					<h2 class="text-lg font-semibold mb-2">Certificates</h2>
					<div class="space-y-3">
						<div class="flex items-center justify-between">
							<div>
								<div class="text-sm font-medium">CA Certificate</div>
								<div id={ "ca-display-" + account.Id } class="text-xs text-slate-500 font-mono">****</div>
							</div>
							<div>
								<button hx-get={ "/cert/" + account.Id + "/ca" } hx-target={ "#ca-display-" + account.Id } hx-swap="innerHTML" class="px-2 py-1 bg-gray-200 rounded" aria-label="show ca">ğŸ‘ï¸</button>
							</div>
						</div>

						<div class="flex items-center justify-between">
							<div>
								<div class="text-sm font-medium">TLS Certificate</div>
								<div id={ "cert-display-" + account.Id } class="text-xs text-slate-500 font-mono">****</div>
							</div>
							<div>
								<button hx-get={ "/cert/" + account.Id + "/cert" } hx-target={ "#cert-display-" + account.Id } hx-swap="innerHTML" class="px-2 py-1 bg-gray-200 rounded" aria-label="show cert">ğŸ‘ï¸</button>
							</div>
						</div>

						<div class="flex items-center justify-between">
							<div>
								<div class="text-sm font-medium">TLS Key</div>
								<div id={ "key-display-" + account.Id } class="text-xs text-slate-500 font-mono">****</div>
							</div>
							<div>
								<button hx-get={ "/cert/" + account.Id + "/key" } hx-target={ "#key-display-" + account.Id } hx-swap="innerHTML" class="px-2 py-1 bg-gray-200 rounded text-red-600" aria-label="show key">ğŸ‘ï¸</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	}
}
